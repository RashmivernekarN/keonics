(function(){/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
'use strict';var g=this||self;function l(a,b){a=a.split(".");var c=g;a[0]in c||"undefined"==typeof c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)a.length||void 0===b?c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}:c[d]=b};var m={},n=null;var p="function"===typeof Uint8Array;function q(a){return null!==a&&"object"==typeof a&&!Array.isArray(a)&&!(p&&null!=a&&a instanceof Uint8Array)}function u(a,b){if(null!=a)return Array.isArray(a)||q(a)?v(a,b):b(a)}function v(a,b){if(Array.isArray(a)){var c=Array(a.length);for(var d=0;d<a.length;d++)c[d]=u(a[d],b);Array.isArray(a)&&a[w]&&x(c);return c}c={};for(d in a)c[d]=u(a[d],b);return c}
function y(a){switch(typeof a){case "number":return isFinite(a)?a:String(a);case "object":if(p&&null!=a&&a instanceof Uint8Array){var b;void 0===b&&(b=0);if(!n){n={};for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),d=["+/=","+/","-_=","-_.","-_"],e=0;5>e;e++){var f=c.concat(d[e].split(""));m[e]=f;for(var h=0;h<f.length;h++){var k=f[h];void 0===n[k]&&(n[k]=h)}}}b=m[b];c=Array(Math.floor(a.length/3));d=b[64]||"";for(e=f=0;f<a.length-2;f+=3){var r=a[f],t=a[f+1];k=
a[f+2];h=b[r>>2];r=b[(r&3)<<4|t>>4];t=b[(t&15)<<2|k>>6];k=b[k&63];c[e++]=h+r+t+k}h=0;k=d;switch(a.length-f){case 2:h=a[f+1],k=b[(h&15)<<2]||d;case 1:a=a[f],c[e]=b[a>>2]+b[(a&3)<<4|h>>4]+k+d}a=c.join("")}return a;default:return a}}const w=Symbol("IS_REPEATED_FIELD");function x(a){Array.isArray(a)&&!Object.isFrozen(a)&&(a[w]=!0);return a};let z;function A(a,b,c){var d=z;z=null;a||(a=d);d=this.constructor.m;a||(a=d?[d]:[]);this.j=d?0:-1;this.h=null;this.g=a;a:{d=this.g.length;a=d-1;if(d&&(d=this.g[a],q(d))){this.l=a-this.j;this.i=d;break a}void 0!==b&&-1<b?(this.l=Math.max(b,a+1-this.j),this.i=null):this.l=Number.MAX_VALUE}if(c)for(b=0;b<c.length;b++)a=c[b],a<this.l?(a+=this.j,(d=this.g[a])?x(d):this.g[a]=B):(C(this),(d=this.i[a])?x(d):this.i[a]=B)}const B=Object.freeze(x([]));function C(a){let b=a.l+a.j;a.g[b]||(a.i=a.g[b]={})}
function D(a,b,c=!1){return-1===b?null:c||b>=a.l?a.i?a.i[b]:void 0:a.g[b+a.j]}function E(a,b){a=D(a,b);return null==a?a:!!a}function F(a,b){a=D(a,b);return null==a?0:a}function G(a){a=E(a,1);return null==a?!1:a}function H(a,b,c){b>=a.l?(C(a),a.i[b]=c):a.g[b+a.j]=c}function I(a,b,c,d){c!==d?H(a,b,c):H(a,b,void 0)}function J(a,b,c){if(-1===c)return null;a.h||(a.h={});if(!a.h[c]){let d=D(a,c,!1);d&&(a.h[c]=new b(d))}return a.h[c]}A.prototype.toJSON=function(){const a=K(this,!1);return v(a,y)};
function K(a,b){if(a.h)for(let c in a.h){const d=a.h[c];if(Array.isArray(d))for(let e=0;e<d.length;e++)d[e]&&K(d[e],b);else d&&K(d,b)}return a.g}function L(a,b){z=b=b?JSON.parse(b):null;a=new a(b);z=null;return a}A.prototype.toString=function(){return K(this,!1).toString()};var N=class extends A{constructor(a){super(a,-1,M)}},M=[17];var P=class extends A{constructor(a){super(a,-1,O)}},O=[8];var R=class extends A{constructor(a){super(a,-1,Q)}},Q=[27];var aa=class extends A{constructor(a){super(a)}};var ca=class extends A{constructor(a){super(a,-1,ba)}},ba=[1,2,3];var ea=class extends A{constructor(){super(void 0,-1,da)}},da=[12];/*

 SPDX-License-Identifier: Apache-2.0
*/
function S(a,b){a=a.getElementsByTagName("META");for(let c=0;c<a.length;++c)if(a[c].getAttribute("name")===b)return a[c].getAttribute("content")||"";return""};function T(a,b){a=a.body;var c={detail:void 0};let d;"function"===typeof window.CustomEvent?d=new CustomEvent(b,c):(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!!c.bubbles,!!c.cancelable,c.detail));a.dispatchEvent(d)}
var fa=class{constructor(a){this.body=a;S(a,"sampling_mod");var b=S(a,"namespace");if(!b){b="ns-"+(0,Math.random)().toString(36).substr(2,5);a:{var c=a.getElementsByTagName("META");for(let d=0;d<c.length;++d)if("namespace"===c[d].getAttribute("name")&&c[d].getAttribute("index")===(0).toString()){c[d].setAttribute("content",b);break a}c=a.querySelector("#mys-meta");c||(c=document.createElement("div"),c.id="mys-meta",c.style.position="absolute",c.style.display="none",a.appendChild(c));a=document.createElement("META");
a.setAttribute("name","namespace");a.setAttribute("content",b);a.setAttribute("index",(0).toString());c.appendChild(a)}}}addEventListener(a,b){this.body.addEventListener(a,b)}};var ha=class extends A{constructor(){super(void 0)}};function U(a){var b=document;a=String(a);"application/xhtml+xml"===b.contentType&&(a=a.toLowerCase());return b.createElement(a)};function V(a){if(1>=a.h.offsetWidth||1>=a.h.offsetHeight)return!1;a.g.remove();T(a.context,"spanReady");return!0}
var ia=class{constructor(a,b){this.context=a;this.i=b;this.h=U("SPAN");this.g=U("DIV");this.h.style.fontSize="6px";this.h.textContent="go";this.g.style.position="absolute";this.g.style.top="100%";this.g.style.left="100%";this.g.style.width="1px";this.g.style.height="0";this.g.style.overflow="hidden";this.g.style.visibility="hidden";this.g.appendChild(this.h)}wait(){if(!G(this.i)&&(T(this.context,"spanStart"),this.context.body.appendChild(this.g),!V(this)))return new Promise(a=>{const b=setInterval(()=>
{V(this)&&(clearInterval(b),a())},F(this.i,3))})}};var ja=class{constructor(a,b){this.context=a;this.h=0;this.i=J(b,R,1);this.g=J(b,P,12)||new P;this.h=a=F(b,2);2===a&&(H(this.g,6,!1),H(this.g,7,!1));J(this.i,N,10)||new N}};function W(a){a.g&=-31}function X(a,b){a.g|=b}var ka=class{constructor(a,b){this.context=a;this.j=b;new ea;this.g=0}h(){}};function Y(a){L(ca,S(a.context.body,"engine_msg")||"[]");return a.g.h()||Promise.resolve()}function la(a){var b;W(a.g);X(a.g,1);null===(b=window.AFMA_Communicator)||void 0===b?void 0:b.addEventListener("onshow",()=>{X(a.g,32)});let c=0;const d=a.context.body;d.addEventListener("browserRender",()=>{++c;if(1===c)T(a.context,"overallStart"),Y(a).then(()=>{T(a.context,"overallQuiet")});else{var e=d.clientHeight;d.clientWidth&&e&&Y(a)}})}var ma=class{constructor(a,b,c,d){this.g=d(a,b,c);this.context=this.g.context}};function na(a){a.i.length=0;a.h=!0}function Z(a,b){a.g=!0;const c=()=>{a.h=!1;const d=a.i.shift();return void 0===d?(a.g=!1,Promise.resolve()):Z(a,d())};return b?b.then(c,()=>{if(a.h)return c();a.g=!1;return Promise.reject()}):c()}function oa(a,b){for(const c of b)a.i.push(c);if(!a.g)return Z(a)}var pa=class{constructor(){this.h=this.g=!1;this.i=[]}};var qa=class extends ka{constructor(){super(...arguments);this.i=new pa}h(){na(this.i);return oa(this.i,[()=>{},()=>{let a;var b=this.j;const c=new ha;I(c,3,100,0);I(c,4,1E4,0);E(b.g,4)?(I(c,6,!0,!1),I(c,7,"monospace",""),I(c,8,"IMWimw0.!?@","")):(E(b.g,5)&&I(c,9,!0,!1),I(c,5,!0,!1));E(b.g,3)&&I(c,2,!0,!1);2===b.h&&I(c,2,!0,!1);c&&(a=(new ia(this.context,c)).wait());T(this.context,"browserStart");T(this.context,"browserStartEnd");W(this);X(this,2);return a},()=>{T(this.context,"browserReady");T(this.context,
"browserReadyEnd");X(this,4);T(this.context,"overallReady")},()=>{T(this.context,"browserQuiet");T(this.context,"browserQuietEnd");X(this,8)}])}};(function(a){let b=null;l("mys.engine.init",(c,d)=>{const e=L(aa,S(d,"render_config")||"[]");b=new ma(c,d,e,a);la(b)});l("mys.engine.stage",()=>b?b.g.g:0)})(function(a,b,c){a=new fa(b);c=new ja(a,c);return new qa(a,c)});}).call(this);
